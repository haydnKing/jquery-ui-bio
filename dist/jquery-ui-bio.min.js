/*! jQuery Ui Bio - v0.1.0 - 2012-09-27
* https://github.com/Gibthon/jquery-ui-bio
* Copyright (c) 2012 Haydn King; Licensed MIT, GPL */
(function(e){e.fn.awesome=function(){return this.each(function(){e(this).html("awesome")})},e.awesome=function(){return"awesome"},e.expr[":"].awesome=function(e){return e.textContent.indexOf("awesome")>=0}})(jQuery),function(e,t){var n="bio-fragment-list ui-widget ui-state-default";e.widget("bio.fragmentSelect",{options:{text:{filter:"filter",loading:"Loading fragments...",none_found:"No fragments found"},defaultHelper:"clone",height:400},_create:function(){var t=this,r=this.options,i=this.el=e(this.element[0]).addClass(n),s=e("<div>").addClass("bio-filter ui-widget-header").appendTo(i);this.input=e('<input type="text">').appendTo(s),e("<div>").addClass("ui-icon ui-icon-search").appendTo(s);var o=e("<div>").addClass("bio-panel").appendTo(i),u=i.find("ul");u.length===1?u.detach().appendTo(o):u=e("ul").appendTo(o),u.find("li").each(function(){e(this).addClass("ui-state-default").children().fragment({helper:r.defaultHelper})}),u.on({mouseenter:function(){e(this).addClass("ui-state-hover")},"mouseleave dragstop":function(){e(this).removeClass("ui-state-hover")}},"ul > li")}})}(jQuery);var next_color=function(){var e=Math.random()*360,t=360/1.61803;return function(){return e=Math.floor(e+t)%360,"hsl("+e+",40%,50%)"}}();(function(e,t){e.widget("bio.tooltip",{options:{mouseTarget:"this",openDelay:250,closeDelay:250,openAnim:0,closeAnim:200},_create:function(){var t=this.el=e(this.element[0]).hide(),n=this.options,r=this;typeof n.mouseTarget=="string"&&(n.mouseTarget==="this"?n.mouseTarget=t:n.mouseTarget=t.find(n.mouseTarget)),this.timeout=null,this._is_open=!1,this._enabled=!0,n.mouseTarget.mouseenter(function(){r._on_enter()}).mouseleave(function(){r._on_leave()})},close:function(){this._clear_timeout(),this.el.fadeOut(this.options.closeAnim),this._is_open=!1,this._trigger("close")},open:function(){this._clear_timeout(),this.el.fadeIn(this.options.openAnim),this._is_open=!0,this._trigger("open")},disable:function(){this.close(),this._enabled=!1},enable:function(){this._enabled=!0},_on_enter:function(){if(!this._enabled)return;var e=this,t=this.options;this._clear_timeout(),this._is_open||(this.timeout=setTimeout(function(){e.open()},t.openDelay))},_on_leave:function(){if(!this._enabled)return;var e=this,t=this.options;this._clear_timeout(),this._is_open&&(this.timeout=setTimeout(function(){e.close()},t.closeDelay))},_clear_timeout:function(){this.timeout!=null&&(clearTimeout(this.timeout),this.timeout=null)}})})(jQuery),function(e,t){var n="bio-fragment ui-widget ui-state-default",r="ui-state-hover ui-state-active",i="ui-state-disabled",s="ui-corner-all";e.widget("bio.fragment",e.ui.draggable,{options:{name:null,desc:null,length:null,url:t,color:t,text:{goto_page:"Goto Page",def_desc:"No Description",def_name:"Unnamed Fragment"},helper:"clone"},_create:function(){var t=this.options,r=this,i=this.el=e(this.element[0]).addClass(n);t.name=i.attr("name")||t.name||t.text.def_name,t.desc=i.attr("desc")||t.desc||t.text.def_desc,t.length=i.attr("length")||t.length||0,t.url=i.attr("href")||t.url,t.color=t.color||next_color(),this.name=e("<p>").text(t.name).addClass("bio-name").appendTo(i),this.info=e("<div>").hide().addClass(s).appendTo(i).mousedown(function(e){e.stopPropagation()}),this.refreshInfo(),i.css({"background-color":t.color,"border-color":t.color}),t.helper==="clone"&&(t.helper=function(){return e("<div>").addClass(n).css({"background-color":t.color,"border-color":t.color,"z-index":100}).append(e("<p>").text(t.name))}),i.draggable(t).on("dragstart",function(){r.info.tooltip("disable")}).on("dragstop",function(){r.info.tooltip("enable")}),this.info.tooltip({mouseTarget:this.el,openDelay:500})},_init:function(){},option:function(e,t){var n=this.options;if(t==null)return n[e]||this.$el.draggable(e);n[e]=t;switch(e){case"name":this.name.text(t);break;case"desc":case"length":case"url":this.refreshInfo();break;case"color":this.el.css({"background-color":this.options.color,"border-color":this.options.color});break;case"draggable":this.el.draggable(t?"enable":"disable");break;default:this.el.draggable(e,t)}return this},refreshInfo:function(){var t=this.options;this.info.html(""),e('<div><p class="bio-length">'+t.length+"</p></div>").appendTo(this.info),e('<div><p class="bio-desc">'+t.desc+"</p></div>").appendTo(this.info),t.url!=null&&e("<div><a href="+t.url+' class="bio-url">'+t.text.goto_page+"</a></div>").appendTo(this.info)}})}(jQuery);